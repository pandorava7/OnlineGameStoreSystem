@model List<GameCategoryViewModel>

<div class="category-section">

    <!-- ===== Example Category Block ===== -->
    @foreach (var category in Model)
    {
        <div class="category-block">

            <div class="category-header">
                <h2>@category.Title</h2>
                <a class="view-all" href="/Search?@category.Slug">View All</a>
            </div>

            <div class="category-slider">
                <!-- 左右按钮 -->
                <button class="cat-btn left-btn">&#10094;</button>
                <button class="cat-btn right-btn">&#10095;</button>

                <!-- 新增 wrapper，用于隐藏溢出 -->
                <div class="game-list-wrapper">
                    <div class="game-list">
                        @foreach (var game in category.Games)
                        {
                            <a asp-controller="Home" asp-action="GameDetail" asp-route-name="@game.Title.Replace(' ', '_')">
                                <div class="game-card">
                                    <img src="@game.CoverUrl" alt="@game.Title" />
                                    <div class="game-info">
                                        <p class="game-title">@game.Title</p>

                                        @if (game.DiscountPrice != null)
                                        {
                                            if (game.Price == 0 || game.DiscountPrice == 0)
                                            {
                                                <!-- 折扣为0或者原价为0，算作 Free，同时显示原价划掉 -->
                                                <p class="game-price free">
                                                    Free <span class="original-price">RM @($"{game.Price:F2}")</span>
                                                </p>
                                            }
                                            else
                                            {
                                                <!-- 有折扣且折扣>0 -->
                                                var discountedPrice = game.DiscountPrice ?? game.Price;
                                                <p class="game-price discounted">
                                                    RM @($"{discountedPrice:F2}")
                                                    <span class="original-price">RM @($"{game.Price:F2}")</span>
                                                </p>
                                            }
                                        }
                                        else
                                        {
                                            <!-- 无折扣 -->
                                            if (game.Price == 0)
                                            {
                                                <p class="game-price free">Free to Play</p>
                                            }
                                            else
                                            {
                                                <p class="game-price">RM @($"{game.Price:F2}")</p>
                                            }
                                        }

                                    </div>
                                </div>
                            </a>
                        }
                    </div>
                </div>
            </div>

            <div class="dots">
                @* 动态生成 *@
            </div>

        </div>

    }
</div>

