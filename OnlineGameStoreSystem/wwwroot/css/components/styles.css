/* =========================================
   ROXY'S GLOBAL STYLES - SUBTLE NOIR EDITION
   ========================================= */
:root {
    /* 颜色 */
    --primary-color: #ff4081; /* 亮粉色 - 强调色 */
    --accent-color: #8257e5; /* 紫色 - 次要强调色 */
    --accent-color2: #64ffda; /* 青绿色 - 额外强调色 */
    --bg-dark: #121214; /* 深色背景 */
    --bg-surface: #1a1a1e; /* 稍亮的背景，用于卡片等 */
    --text-light: #e1e1e6; /* 浅色文本 */
    --text-muted: #8d8d99; /* 柔和文本 */
    --border-color: #2c2c31; /* 边框颜色 */
    --shadow-color: rgba(0, 0, 0, 0.4); /* 阴影颜色 */
    /* 字体 */
    --font-primary: 'Poppins', sans-serif;
    --font-size-base: 1rem; /* 16px */
    /* 间距 */
    --spacing-xs: 0.5rem;
    --spacing-sm: 1rem;
    --spacing-md: 2rem;
    --spacing-lg: 3rem;
    /* 其他 */
    --border-radius: 8px;
    --transition-speed: 0.3s;
}

/* =========================================
   全局重置和基础样式
   ========================================= */

html {
    scroll-behavior: smooth;
}

header {
    /* 确保 header 在所有页面顶部 */
    position: relative;
    z-index: 1000;
    /* 缩小宽度 */
    width: 100%;
}

body {
    font-family: var(--font-primary);
    background-color: var(--bg-dark);
    color: var(--text-light);
    line-height: 1.6;
    overflow-x: hidden; /* 防止水平滚动条 */
}

a {
    color: var(--primary-color);
    text-decoration: none;
    transition: color var(--transition-speed), transform var(--transition-speed);
}

    a:hover {
        color: var(--accent-color);
        transform: translateY(-2px); /* 悬停时稍微上浮 */
    }

img {
    max-width: 100%;
    height: auto;
    display: block;
}

h1, h2, h3, h4, h5, h6 {
    color: var(--text-light);
    margin-bottom: var(--spacing-sm);
    line-height: 1.2;
}

h1 {
    font-size: 3.5rem;
}
/* ~56px */
h2 {
    font-size: 2.5rem;
}
/* ~40px */
h3 {
    font-size: 1.75rem;
}
/* ~28px */
p {
    margin-bottom: var(--spacing-sm);
}

/* 按钮基础样式 */
.btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px; /* 图标和文字的间距 */
    padding: 12px 24px;
    border-radius: var(--border-radius);
    font-weight: bold;
    text-decoration: none;
    color: var(--text-light);
    transition: all var(--transition-speed) ease;
    border: 2px solid transparent; /* 为第二个按钮预留边框位置 */
    cursor: pointer;
    text-transform: uppercase;
    font-size: 0.9rem;
}

.btn-primary {
    background: var(--primary-color); /* pink base */
    color: var(--bg-dark);
    box-shadow: 0 4px 15px rgba(240,101,149,0.35);
    border: none;
    transition: background 0.22s ease, transform 0.18s ease, box-shadow 0.18s ease;
}

    .btn-primary:hover {
        background: var(--accent-color); /* purple hover */
        color: var(--text-light);
        box-shadow: 0 6px 20px rgba(132,94,247,0.45);
        transform: translateY(-3px);
    }

.btn:focus {
    outline: none;
    box-shadow: 0 0 0 3px rgba(255, 64, 129, 0.5);
}

/* 表单元素基础样式 */
.form-group {
    margin-bottom: var(--spacing-md);
}

.form-label {
    display: block;
    margin-bottom: 0.5rem;
    color: var(--text-light);
    font-weight: 600;
    font-size: 0.9rem;
}

.form-input {
    width: 100%;
    padding: 0.8rem 1rem;
    background-color: var(--bg-dark);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius);
    color: var(--text-light);
    font-family: var(--font-primary);
    font-size: var(--font-size-base);
    transition: border-color var(--transition-speed), box-shadow var(--transition-speed);
}

    .form-input::placeholder {
        color: var(--text-muted);
    }

    .form-input:focus {
        border-color: var(--primary-color);
        box-shadow: 0 0 0 2px rgba(255, 64, 129, 0.3);
        outline: none;
    }


/* ========================================= */
/* LAYOUT: NAVBAR (Glassmorphism - 粉色/紫色主题) */
/* ========================================= */
/* 定义导航栏高度变量，以便 body padding-top 可以引用 */
:root {
    --navbar-height: 5rem; /* 默认导航栏高度 */
    /*
     * 请确保您的 :root 变量中包含以下粉色/紫色主题相关的变量，
     * 否则这里的样式可能无法正确显示颜色。
     */
    --bg-deep: #0C001C; /* 极致深紫黑背景 */
    --bg-surface: #1A0D32; /* 表面颜色 */
    --bg-secondary: #120828; /* 搜索框等稍深的背景色 */
    --text-main: #EFE8F6; /* 主文字：柔和灰白 */
    --text-light: #FFFFFF; /* 亮色文本 */
    --text-muted: #AF9BBF; /* 次要文字 */
    --accent-color: #DA2E7F; /* 品牌强调色：紫粉色 */
    --accent-glow: rgba(218, 46, 127, 0.4); /* 强调色光晕 */
    --primary-color: #DA2E7F; /* 主按钮/链接色 */
    --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    --transition-speed: 0.3s;
    --spacing-md: 2rem;
    --spacing-lg: 3rem;
}

/* ========================================= */
/* 修复导航栏布局和颜色 */
/* ========================================= */

/* Navbar 主容器 */
.navbar {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 5rem; /* 约 80px */
    padding: 0 5%;
    display: flex; /* 确保 navbar 本身是 flex 容器 */
    justify-content: space-between;
    align-items: center;
    z-index: 1000;
    background: rgba(12, 0, 28, 0.8); /* 使用粉紫主题的背景色 */
    backdrop-filter: blur(10px);
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    transition: background-color 0.3s ease, box-shadow 0.3s ease;
    box-sizing: border-box;
}

/* 中间导航菜单 */
.nav-menu {
    display: flex !important; /* 关键：让 ul 成为 Flex 容器 */
    flex-direction: row !important; /* 关键：强制子元素横向排列 */
    gap: 3rem !important; /* 菜单项之间的间距 */
    list-style: none !important; /* 移除列表点 */
    margin: 0 !important; /* 移除默认外边距 */
    padding: 0 !important; /* 移除默认内边距 */
}

    /* 导航菜单项 (li) 样式，确保它们也是 flex item */
    .nav-menu li {
        display: flex !important; /* 让 li 也成为 flex 容器，有助于垂直对齐内部链接 */
        align-items: center !important; /* 垂直居中 nav-link */
        margin: 0 !important; /* 确保 li 没有额外的外边距 */
        padding: 0 !important;
        white-space: nowrap;
    }

/* 导航链接样式 */
.nav-link {
    font-size: 1rem;
    font-weight: 600;
    color: var(--text-light) !important; /* 强制白色，覆盖任何默认样式 */
    text-decoration: none;
    position: relative;
    padding: 0.5rem 0; /* 增加上下内边距，提供点击区域 */
    transition: color 0.3s ease, text-shadow 0.3s ease;
    white-space: nowrap;
}

    /* 悬停和激活状态 */
    .nav-link:hover,
    .nav-link.active {
        color: var(--primary-color) !important; /* 悬停时变粉紫色 */
        text-shadow: 0 0 10px var(--accent-glow);
    }

    /* 导航链接底部的动画条 */
    .nav-link::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        width: 0;
        height: 3px;
        background-color: var(--primary-color);
        transition: width 0.3s ease;
    }

    .nav-link:hover::after,
    .nav-link.active::after {
        width: 100%;
    }

/* Ensure nav icons are always visible and on top */
.nav-icons,
.nav-icons a.icon-link,
#nav-cart-link,
#btn-login {
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    gap: 0.75rem !important;
    color: var(--text-light) !important;
    opacity: 1 !important;
    pointer-events: auto !important;
    z-index: 1100 !important; /* above search box / other elements */
}

.icon-link i {
    font-size: 1.25rem;
    color: inherit !important;
    line-height: 1;
}

/* let JS control badge visibility; ensure it does not hide the icon */
.cart-badge {
    display: none; /* JS will set to block when needed */
}

/* 图标链接样式 */
.icon-link {
    font-size: 1.2rem;
    color: var(--text-light) !important; /* 强制白色 */
    display: flex; /* 确保图标可以垂直居中 */
    align-items: center;
    text-decoration: none;
    cursor: pointer;
    transition: transform 0.3s ease, color 0.3s ease;
}

    .icon-link:hover {
        color: var(--primary-color) !important;
        transform: scale(1.1);
    }

/* 5. Logo 样式 */
.nav-logo {
    flex: 0 0 auto;
    max-width: 220px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    margin-right: 1rem;
}

/* 确保搜索图标自身可点击 (需要 JS 来控制搜索框显示/隐藏) */
#search-icon-link {
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    z-index: 101; /* 确保搜索图标在搜索框之上 */
    transition: opacity 0.3s ease;
}

    #search-icon-link i {
        pointer-events: none; /* 确保点击的是 a 标签 */
    }

/* 滑出式搜索框样式 (需要 JS 来控制 .active 类) */
.search-slide-out-box {
    position: absolute;
    top: 50%;
    right: 90px; /* 搜索框的初始定位 */
    /* 初始状态：向右偏移并隐藏 */
    transform: translateY(-50%) translateX(20px);
    display: flex;
    align-items: center;
    background-color: var(--bg-secondary);
    border-radius: 25px;
    padding: 8px 15px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
    z-index: 99; /* 在 nav-icons 之下，但高于页面主体 */
    width: 300px;
    max-width: calc(100vw - 150px);
    transition: transform 0.4s ease-out, opacity 0.4s ease-out, visibility 0.4s;
    opacity: 0;
    visibility: hidden;
    pointer-events: none; /* 初始状态下不响应鼠标事件 */
}
    /* 搜索框激活时的样式 */
    .search-slide-out-box.active {
        transform: translateY(-50%) translateX(0); /* 展开时滑入 */
        opacity: 1;
        visibility: visible;
        pointer-events: auto; /* 响应鼠标事件 */
    }

    .search-slide-out-box .search-input {
        flex-grow: 1;
        border: none;
        background: transparent;
        padding: 0 10px;
        font-size: 1rem;
        color: var(--text-main); /* 文本颜色 */
        outline: none;
    }

        .search-slide-out-box .search-input::placeholder {
            color: var(--text-muted);
        }

/* 搜索框内的关闭和提交按钮 */
.search-close-btn,
.search-submit-btn {
    background: none;
    border: none;
    color: var(--accent-color);
    cursor: pointer;
    font-size: 1.1rem;
    padding: 0 5px;
    transition: color 0.2s ease;
    flex-shrink: 0;
}

    .search-close-btn:hover,
    .search-submit-btn:hover {
        color: var(--text-light);
    }

/* 购物车徽章样式 */
.cart-badge {
    position: absolute;
    top: -8px; /* 调整位置 */
    right: -8px;
    background: var(--accent-color);
    color: var(--text-light); /* 徽章文字用亮色 */
    font-size: 0.7rem;
    font-weight: bold;
    width: 18px;
    height: 18px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    transform: scale(0.8);
    transform-origin: top right;
    transition: transform 0.2s ease, opacity 0.2s ease;
    opacity: 0; /* 默认隐藏 */
    visibility: hidden;
}

    .cart-badge.active { /* 通过 JS 控制 .active 类来显示 */
        opacity: 1;
        visibility: visible;
        transform: scale(1);
    }

/* 英雄区 (Hero Section) */
.hero {
    height: 100vh; /* 全屏高度 */
    display: flex;
    justify-content: center;
    align-items: center;
    text-align: center;
    position: relative;
    padding: var(--spacing-md);
    overflow: hidden; /* 防止内容溢出 */
    background: radial-gradient(circle at center, rgba(0,0,0,0.3), var(--bg-deep)) center/cover no-repeat; /* 暗调背景图 */
    flex-direction: column;
}

    .hero::before { /* 额外的叠加层，增加暗度 */
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: radial-gradient(circle at center, rgba(0,0,0,0) 0%, rgba(0,0,0,0.6) 80%);
        z-index: 1;
        pointer-events: none;
    }

.hero-content {
    position: relative;
    z-index: 2; /* 确保内容在叠加层之上 */
    max-width: 900px;
    padding: var(--spacing-lg);
}

.hero-title {
    font-size: 4.5rem; /* 更大的标题 */
    font-weight: 800;
    color: var(--text-light);
    margin-bottom: var(--spacing-sm);
    letter-spacing: -1px;
    text-shadow: 0 4px 10px rgba(0, 0, 0, 0.6);
    line-height: 1.1;
    animation: fadeInUp 1s ease;
}

.hero-highlight {
    color: var(--primary-color);
    -webkit-text-fill-color: var(--accent-color2); /* 重置渐变 */
    text-shadow: 0 0 20px var(--accent-glow);
}

.hero-desc {
    font-size: 1.3rem;
    color: var(--text-muted);
    margin-bottom: var(--spacing-lg);
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
    animation: fadeInUp 1s ease 0.2s backwards;
}

.gamepad {
    display: flex;
    gap: 20px;
    justify-content: center;
}

/* 商店部分 */
.store-section {
    padding: var(--spacing-lg) 0; /* 上下内边距 */
    max-width: 1400px; /* 限制内容最大宽度 */
    margin: 0 auto; /* 居中显示 */
    text-align: center;
}

.section-header {
    margin-bottom: var(--spacing-lg);
    text-align: center;
}

.section-title {
    font-size: 2.8rem;
    font-weight: 800;
    color: var(--text-light);
    margin-bottom: var(--spacing-xs);
}

.game-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); /* 响应式网格 */
    gap: var(--spacing-md); /* 网格间距 */
    padding: 0 var(--spacing-md); /* 左右内边距 */
}

.game-card {
    background-color: var(--bg-surface);
    border-radius: var(--border-radius);
    overflow: hidden; /* 隐藏图片溢出部分 */
    box-shadow: 0 5px 20px var(--shadow-color);
    transition: transform var(--transition-speed) ease, box-shadow var(--transition-speed) ease;
}

    .game-card:hover {
        transform: translateY(-8px);
        box-shadow: 0 10px 30px rgba(255, 64, 129, 0.2); /* 悬停时加亮阴影 */
    }

.game-img-wrapper {
    width: 100%;
    height: 200px; /* 固定图片高度 */
    overflow: hidden;
}

.game-img {
    width: 100%;
    height: 100%;
    object-fit: cover; /* 裁剪图片以填充容器 */
    transition: transform var(--transition-speed) ease;
}

.game-card:hover .game-img {
    transform: scale(1.05); /* 悬停时图片轻微放大 */
}

.game-info {
    padding: var(--spacing-md);
    text-align: left;
}

.game-title {
    font-size: 1.5rem;
    font-weight: 600;
    margin-bottom: var(--spacing-xs);
}

.game-genre {
    display: block;
    color: var(--text-muted);
    font-size: 0.9rem;
    margin-bottom: var(--spacing-sm);
}

.game-meta {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: var(--spacing-sm);
}

.game-price {
    font-size: 1.2rem;
    font-weight: 800;
    color: var(--primary-color);
}

/* =========================================
   新增或修改：购物车徽章默认隐藏 (当数量为0时)
   ========================================= */
.cart-badge {
    position: absolute;
    top: -5px;
    right: -5px;
    background-color: var(--accent-color);
    color: var(--text-light);
    font-size: 0.7rem;
    font-weight: 600;
    border-radius: 50%;
    padding: 0.2em 0.5em;
    min-width: 20px;
    text-align: center;
    line-height: 1;
    display: none; /* 默认隐藏，只有当有商品时才通过JS显示 */
    transform: scale(0.8); /* 稍微缩小 */
    transform-origin: top right;
    transition: transform 0.2s ease;
}

/* 按钮样式更新: 加入购物车按钮显示文本 */
.btn-add-to-cart {
    background-color: var(--accent-color);
    color: var(--text-light);
    border-radius: var(--border-radius); /* 改回方形，适应文本 */
    padding: 0.6rem 1rem; /* 调整内边距 */
    display: inline-flex; /* 允许图标和文本并排 */
    align-items: center;
    justify-content: center;
    font-size: 0.9rem;
    gap: 8px; /* 图标和文本的间距 */
    transition: background-color var(--transition-speed) ease, transform var(--transition-speed) ease;
}

    .btn-add-to-cart:hover {
        background-color: var(--primary-color);
        transform: scale(1.05); /* 悬停时轻微放大 */
    }

        .btn-add-to-cart:hover:not(:disabled) { /* 禁用状态下不显示 hover 效果 */
            background-color: var(--primary-color);
            transform: scale(1.05); /* 悬停时轻微放大 */
        }

    /* 新增：商品已在购物车时的按钮样式 */
    .btn-add-to-cart.added {
        background-color: var(--success-color); /* 绿色 */
        cursor: not-allowed;
        color: #fff;
        opacity: 0.8;
    }

    .btn-add-to-cart:disabled { /* 禁用状态的通用样式 */
        cursor: not-allowed;
        opacity: 0.6;
    }

    /* 新增：未登录时禁用按钮的样式 */
    .btn-add-to-cart.disabled-by-login {
        background-color: var(--bg-dark); /* 深色背景 */
        color: var(--text-muted); /* 灰色文本 */
        cursor: not-allowed;
        border: 1px dashed var(--border-color-light); /* 虚线边框 */
        opacity: 0.7;
        pointer-events: none; /* 确保不能通过事件委托点击 */
    }

        /* 确保 hover 不生效 */
        .btn-add-to-cart.disabled-by-login:hover {
            background-color: var(--bg-dark); /* 保持背景色 */
            transform: none; /* 移除悬停动画 */
        }

/* =========================================
   新增：临时消息框样式
   ========================================= */
#temp-message-box {
    position: fixed;
    top: 20px;
    left: 50%;
    transform: translateX(-50%) translateY(-100px); /* 初始位置在屏幕外上方 */
    opacity: 0;
    padding: 12px 25px;
    border-radius: var(--border-radius);
    color: var(--text-light);
    font-weight: 600;
    font-size: 0.95rem;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
    z-index: 3000; /* 确保在最顶层 */
    transition: transform 0.4s ease-out, opacity 0.4s ease-out;
}

    #temp-message-box.show {
        transform: translateX(-50%) translateY(0); /* 动画到可见位置 */
        opacity: 1;
    }

    #temp-message-box.info {
        background-color: #3f51b5; /* 蓝色 */
    }

    #temp-message-box.success {
        background-color: #4CAF50; /* 绿色 */
    }

    #temp-message-box.error {
        background-color: #f44336; /* 红色 */
    }

/* 媒体查询：小屏幕上调整消息框位置 */
@media (max-width: 600px) {
    #temp-message-box {
        width: 90%;
        text-align: center;
        padding: 10px 15px;
    }
}

/* 模态框 (Modal) */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.7); /* 半透明黑色背景 */
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 2000;
    opacity: 0; /* 默认隐藏 */
    visibility: hidden;
    transition: opacity var(--transition-speed) ease, visibility var(--transition-speed) ease;
}

    .modal-overlay.active {
        opacity: 1;
        visibility: visible;
    }

.modal-box {
    background-color: var(--bg-surface);
    padding: var(--spacing-lg);
    border-radius: var(--border-radius);
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.6);
    width: 90%;
    max-width: 400px;
    transform: translateY(-50px); /* 默认稍向上偏移 */
    transition: transform var(--transition-speed) ease-out, opacity var(--transition-speed) ease-out;
    opacity: 0;
}

.modal-overlay.active .modal-box {
    transform: translateY(0); /* 模态框弹出到中心 */
    opacity: 1;
}

/* 页脚 */
.footer {
    background-color: var(--bg-surface);
    color: var(--text-muted);
    text-align: center;
    padding: var(--spacing-md) 0;
    border-top: 1px solid var(--border-color);
    margin-top: var(--spacing-lg);
}

    .footer p {
        margin: 0;
        font-size: 0.9rem;
    }


/* =========================================
   媒体查询 (响应式设计)
   ========================================= */
@media (max-width: 768px) {
    .navbar {
        flex-direction: column;
        padding: 1rem var(--spacing-sm);
        gap: var(--spacing-sm);
    }

    .nav-menu {
        flex-direction: column;
        gap: var(--spacing-sm);
        text-align: center;
        width: 100%;
    }

    .nav-link {
        width: 100%;
        padding: 0.5rem 0;
        border-bottom: 1px solid var(--border-color);
    }

        .nav-link:last-child {
            border-bottom: none;
        }

    .nav-icons {
        margin-top: var(--spacing-sm);
        justify-content: center;
        width: 100%;
    }

    .hero-title {
        font-size: 3rem; /* 移动端标题小一点 */
    }

    .hero-desc {
        font-size: 1rem;
    }

    .btn {
        padding: 0.7rem 1.5rem;
        font-size: 0.8rem;
    }

    .section-title {
        font-size: 2rem;
    }

    .game-grid {
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        padding: 0 var(--spacing-sm);
    }
}

@media (max-width: 480px) {
    .hero-title {
        font-size: 2.5rem;
    }

    .hero-content div { /* 调整按钮区域的 flex-direction */
        flex-direction: column;
    }

    .btn {
        width: 100%; /* 按钮占据全宽 */
    }

    .nav-logo {
        font-size: 1.5rem;
    }

    .modal-box {
        padding: var(--spacing-md);
    }
}

/* =========================================
   新增或修改：购物车徽章默认隐藏 (当数量为0时)
   ========================================= */
.cart-badge {
    position: absolute;
    top: -5px;
    right: -5px;
    background-color: var(--accent-color);
    color: var(--text-light);
    font-size: 0.7rem;
    font-weight: 600;
    border-radius: 50%;
    padding: 0.2em 0.5em;
    min-width: 20px;
    text-align: center;
    line-height: 1;
    display: none; /* 默认隐藏，只有当有商品时才通过JS显示 */
    transform: scale(0.8); /* 稍微缩小 */
    transform-origin: top right;
    transition: transform 0.2s ease;
}

/* =========================================
   新增：临时消息框样式
   ========================================= */
#temp-message-box {
    position: fixed;
    top: 20px;
    left: 50%;
    transform: translateX(-50%) translateY(-100px); /* 初始位置在屏幕外上方 */
    opacity: 0;
    padding: 12px 25px;
    border-radius: var(--border-radius);
    color: var(--text-light);
    font-weight: 600;
    font-size: 0.95rem;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
    z-index: 3000; /* 确保在最顶层 */
    transition: transform 0.4s ease-out, opacity 0.4s ease-out;
}

    #temp-message-box.show {
        transform: translateX(-50%) translateY(0); /* 动画到可见位置 */
        opacity: 1;
    }

    #temp-message-box.info {
        background-color: #3f51b5; /* 蓝色 */
    }

    #temp-message-box.success {
        background-color: #4CAF50; /* 绿色 */
    }

    #temp-message-box.error {
        background-color: #f44336; /* 红色 */
    }

/* 媒体查询：小屏幕上调整消息框位置 */
@media (max-width: 600px) {
    #temp-message-box {
        width: 90%;
        text-align: center;
        padding: 10px 15px;
    }
}

/* =========================================
   Cart Page Styles (类似 Food Ordering System 布局)
   ========================================= */

.cart-page-container {
    max-width: 1200px;
    margin: 100px auto 50px auto; /* 顶部留出导航栏空间，底部留出页脚空间 */
    padding: var(--spacing-md);
    min-height: calc(100vh - 150px); /* 确保内容区不会太短 */
}

.cart-page-title {
    font-size: 3rem;
    font-weight: 800;
    color: var(--text-light);
    text-align: center;
    margin-bottom: var(--spacing-lg);
    border-bottom: 2px solid var(--primary-color);
    padding-bottom: var(--spacing-sm);
    display: inline-block; /* 让边框只在文本下方 */
    margin: 0 auto var(--spacing-lg) auto;
}

.cart-content {
    display: flex;
    gap: var(--spacing-lg);
    flex-wrap: wrap; /* 允许在小屏幕上换行 */
    justify-content: center; /* 居中内容 */
}

.cart-items-list {
    flex: 2; /* 占用更多空间 */
    min-width: 300px; /* 最小宽度 */
    background-color: var(--bg-surface);
    border-radius: var(--border-radius);
    padding: var(--spacing-md);
    box-shadow: 0 4px 20px var(--shadow-color);
    border: 1px solid var(--border-color);
}

.empty-cart-message {
    text-align: center;
    color: var(--text-muted);
    font-size: 1.1rem;
    padding: var(--spacing-xl);
}

.cart-item {
    display: flex;
    align-items: center;
    justify-content: space-between; /* 调整为更合理的间距 */
    padding: var(--spacing-sm) 0;
    border-bottom: 1px solid var(--border-color-light);
    gap: var(--spacing-md);
    color: var(--text-light);
    position: relative; /* 允许内部元素绝对定位 */
}

    .cart-item:last-child {
        border-bottom: none;
    }

.item-details {
    display: flex;
    align-items: center;
    flex: 3; /* 允许细节区域占据更多空间 */
    gap: var(--spacing-sm);
}

.item-img {
    width: 80px;
    height: 80px;
    object-fit: cover;
    border-radius: var(--border-radius-sm);
    border: 1px solid var(--border-color-light);
}

.item-info {
    display: flex;
    flex-direction: column;
}

.item-name {
    font-weight: 600;
    font-size: 1.1rem;
    color: var(--text-light);
}

.item-price {
    font-size: 0.9rem;
    color: var(--text-muted);
}

.item-subtotal {
    font-weight: 600;
    min-width: 90px; /* 留出小计的显示空间 */
    text-align: right;
    flex: 1; /* 小计占据一部分空间 */
    padding-right: 40px; /* 为删除按钮留出空间 */
}

.remove-item-btn {
    background: none;
    border: none;
    color: var(--text-muted);
    cursor: pointer;
    font-size: 1.1rem;
    transition: color var(--transition-speed);
    padding: 5px; /* 增加点击区域 */
    position: absolute; /* 绝对定位到右侧 */
    right: 0;
    top: 50%;
    transform: translateY(-50%);
}

    .remove-item-btn:hover {
        color: var(--error-color); /* 红色 */
    }

.cart-summary {
    flex: 1; /* 总结区域占据较少空间 */
    min-width: 280px;
    background-color: var(--bg-surface);
    border-radius: var(--border-radius);
    padding: var(--spacing-md);
    box-shadow: 0 4px 20px var(--shadow-color);
    border: 1px solid var(--border-color);
    display: flex;
    flex-direction: column;
    height: fit-content; /* 让高度适应内容 */
}

.summary-title {
    font-size: 1.8rem;
    font-weight: 700;
    color: var(--text-light);
    margin-bottom: var(--spacing-md);
    text-align: center;
}

.summary-row:last-of-type {
    border-bottom: none;
    margin-bottom: var(--spacing-md);
}

.summary-row.total {
    font-size: 1.4rem;
    font-weight: 700;
    color: var(--primary-color);
    border-top: 2px solid var(--primary-color);
    padding-top: var(--spacing-sm);
    margin-top: var(--spacing-sm);
}

.checkout-btn {
    width: 100%;
    margin-top: var(--spacing-md);
    padding: 1rem;
    font-size: 1.1rem;
    background-color: var(--primary-color);
}

    .checkout-btn:hover {
        background-color: var(--accent-color);
    }

.continue-shopping {
    width: 100%;
    text-align: center;
    margin-top: var(--spacing-sm);
    padding: 0.8rem;
    font-size: 1rem;
    background-color: transparent;
    border: 1px solid var(--text-muted);
    color: var(--text-muted);
}

    .continue-shopping:hover {
        border-color: var(--primary-color);
        color: var(--primary-color);
    }


/* 媒体查询 - 购物车页面响应式 */
@media (max-width: 768px) {
    .cart-page-container {
        margin-top: 80px;
        padding: var(--spacing-sm);
    }

    .cart-page-title {
        font-size: 2.5rem;
        margin-bottom: var(--spacing-md);
    }

    .cart-content {
        flex-direction: column;
        align-items: center;
    }

    .cart-items-list, .cart-summary {
        width: 100%;
        max-width: 600px;
        margin-bottom: var(--spacing-md);
    }

    .cart-item {
        flex-wrap: nowrap; /* 不换行，因为现在没有数量控制了 */
        justify-content: space-between;
        padding-right: var(--spacing-md); /* 确保删除按钮不会跑到容器外面 */
    }

    .item-details {
        flex: 1; /* 占据更多空间 */
        margin-bottom: 0;
    }

    .item-subtotal {
        flex: none; /* 移除 flex 属性 */
        width: auto; /* 宽度自适应 */
        min-width: unset;
        text-align: right;
        padding-right: 0; /* 移除额外右边距 */
        margin-left: auto; /* 推到最右边 */
    }

    .remove-item-btn {
        position: static; /* 恢复正常流 */
        transform: none;
        margin-left: var(--spacing-xs); /* 和小计之间留点距离 */
    }
}

@media (max-width: 480px) {
    .cart-page-title {
        font-size: 2rem;
    }

    .item-img {
        width: 60px;
        height: 60px;
    }

    .item-name {
        font-size: 1rem;
    }

    .item-price, .item-subtotal {
        font-size: 0.85rem;
    }
}

/* 购物车徽章默认隐藏 (当数量为0时或未登录时) */
.cart-badge {
    /* ... 保持原有样式，但 display 属性现在主要由 JS 控制 */
    display: none; /* 初始状态隐藏，JS根据isLoggedIn和cart.length决定显示 */
}

/* ========================================= */
/* 导航栏图标容器 */
/* ========================================= */
.nav-icons {
    display: flex;
    align-items: center;
    gap: 25px;
    position: relative;
    z-index: 20;
    /* ... 保持 nav-icons 的其他原有样式 ... */
}

/* ========================================= */
/* 确保搜索图标自身可点击 */
/* ========================================= */
#search-icon-link {
    display: flex; /* 确保图标链接可以接收点击 */
    align-items: center;
    justify-content: center;
    cursor: pointer; /* 明确光标为手型 */
    z-index: 101; /* 确保搜索图标在所有 nav-icons 子元素之上，包括搜索框 */
    transition: opacity 0.3s ease; /* 用于 JS 控制的渐隐 */
}

    #search-icon-link i {
        pointer-events: none; /* 确保点击的是 a 标签，而不是 i 标签 */
    }


/* ========================================= */
/* 滑出式搜索框样式 */
/* ========================================= */
.search-slide-out-box {
    position: absolute;
    top: 50%;
    right: 90px; /* 您上次确认的位置，可根据需要微调 */
    /* 初始状态：向右偏移并隐藏 */
    transform: translateY(-50%) translateX(20px);
    display: flex;
    align-items: center;
    background-color: var(--bg-secondary);
    border-radius: 25px;
    padding: 8px 15px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
    z-index: 99; /* 确保搜索框在 search-icon-link 之下，但在 nav-icons 的其他内容之上 */
    width: 300px;
    max-width: calc(100vw - 150px);
    transition: transform 0.4s ease-out, opacity 0.4s ease-out, visibility 0.4s;
    opacity: 0;
    visibility: hidden; /* 彻底隐藏，防止挡住点击 */
    pointer-events: none; /* 初始状态下不响应鼠标事件 */
}

    .search-slide-out-box.active {
        transform: translateY(-50%) translateX(0); /* 展开时滑入 */
        opacity: 1;
        visibility: visible;
        pointer-events: auto; /* 响应鼠标事件 */
    }

    .search-slide-out-box .search-input {
        flex-grow: 1;
        border: none;
        background: transparent;
        padding: 0 10px;
        font-size: 1rem;
        color: var(--text-color);
        outline: none;
    }

        .search-slide-out-box .search-input::placeholder {
            color: var(--text-muted);
        }

.search-close-btn,
.search-submit-btn {
    background: none;
    border: none;
    color: var(--primary-color);
    cursor: pointer;
    font-size: 1.1rem;
    padding: 0 5px;
    transition: color 0.2s ease;
    flex-shrink: 0;
}

    .search-close-btn:hover,
    .search-submit-btn:hover {
        color: var(--accent-color);
    }
